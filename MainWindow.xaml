<Window x:Class="EnviadorPagosWPF.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="Enviador de Pagos (OVPM) - SAP B1 HANA" Height="720" Width="1180" WindowStartupLocation="CenterScreen"><DockPanel><StatusBar DockPanel.Dock="Bottom"><StatusBarItem><Ellipse x:Name="ConnLed" Width="12" Height="12" Fill="Red" Margin="0,0,6,0"/></StatusBarItem><StatusBarItem><TextBlock x:Name="ConnText" Text="Desconectado"/></StatusBarItem></StatusBar><StackPanel Orientation="Vertical"><WrapPanel Margin="10" VerticalAlignment="Center"><TextBlock Text="Compañía:" Margin="0,0,6,0" VerticalAlignment="Center"/><ComboBox x:Name="CompanyCombo" Width="220" Margin="0,0,15,0"/><TextBlock Text="Desde:" Margin="0,0,6,0" VerticalAlignment="Center"/><DatePicker x:Name="FromDate" Width="140" Margin="0,0,15,0"/><TextBlock Text="Hasta:" Margin="0,0,6,0" VerticalAlignment="Center"/><DatePicker x:Name="ToDate" Width="140" Margin="0,0,15,0"/><Button x:Name="BtnConectar" Width="110" Content="Conectar" Click="BtnConectar_Click" Margin="0,0,10,0"/><Button x:Name="BtnBuscar" Width="120" Content="Buscar pagos" Click="BtnBuscar_Click"/><Button x:Name="BtnSelTodo" Width="120" Margin="10,0,0,0" Content="Sel. todo" Click="BtnSelTodo_Click"/><Button x:Name="BtnEnviar" Width="200" Margin="10,0,0,0" Content="Enviar" Click="BtnEnviar_Click" IsEnabled="False"/></WrapPanel><DataGrid x:Name="Grid" Margin="10" AutoGenerateColumns="False" IsReadOnly="False" RowDetailsVisibilityMode="VisibleWhenSelected"><DataGrid.Columns><DataGridTextColumn Binding="{Binding StatusDisplay}" Header="Estatus" Width="110" IsReadOnly="True"/><DataGridTemplateColumn Header="Sel." Width="55"><DataGridTemplateColumn.CellTemplate><DataTemplate><CheckBox IsChecked="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center"/></DataTemplate></DataGridTemplateColumn.CellTemplate></DataGridTemplateColumn><DataGridTextColumn Binding="{Binding DocNum}" Header="DocNum" Width="80" IsReadOnly="True"/><DataGridTextColumn Binding="{Binding DocDate, StringFormat={}{0:dd/MM/yyyy}}" Header="Fecha" Width="95" IsReadOnly="True"/><DataGridTextColumn Binding="{Binding CardCode}" Header="Proveedor" Width="100" IsReadOnly="True"/><DataGridTextColumn Binding="{Binding CardName}" Header="Nombre" Width="220" IsReadOnly="True"/><DataGridTextColumn Binding="{Binding DocCurrency}" Header="Mon." Width="60" IsReadOnly="True"/><DataGridTextColumn Binding="{Binding DocTotal, StringFormat=N2}" Header="Total ML" Width="110" IsReadOnly="True"/><DataGridTextColumn Binding="{Binding DocTotalFC, StringFormat=N2}" Header="Total ME" Width="110" IsReadOnly="True"/></DataGrid.Columns><DataGrid.RowDetailsTemplate><DataTemplate><Border BorderBrush="Gainsboro" BorderThickness="1" Margin="0,4,0,6" Padding="8"><StackPanel><TextBlock Text="Detalle del Pago / Facturas pagadas (OPCH)" FontWeight="SemiBold" Margin="0,0,0,6"/><ItemsControl ItemsSource="{Binding Invoices}"><ItemsControl.ItemTemplate><DataTemplate><DockPanel Margin="0,2"><TextBlock Text="{Binding DocNum}" Width="70"/><TextBlock Text="{Binding DocDate, StringFormat={}{0:dd/MM/yyyy}}" Width="85"/><TextBlock Text="{Binding NumAtCard}" Width="190"/><TextBlock Text="{Binding SumApplied, StringFormat=N2}" Width="100" TextAlignment="Right"/><TextBlock Text="{Binding DocCurrency}" Width="60" TextAlignment="Right"/></DockPanel></DataTemplate></ItemsControl.ItemTemplate></ItemsControl><StackPanel Orientation="Horizontal" Margin="0,6,0,0"><TextBlock Text="Adjunto SAP: " FontWeight="SemiBold"/><TextBlock Text="{Binding AttachmentPath}"/></StackPanel><StackPanel Orientation="Horizontal"><TextBlock Text="Bitácora: " FontWeight="SemiBold"/><TextBlock Text="{Binding StatusLog}"/></StackPanel></StackPanel></Border></DataTemplate></DataGrid.RowDetailsTemplate></DataGrid></StackPanel></DockPanel></Window>
